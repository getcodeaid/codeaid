{"version":3,"sources":["showSnip.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"showSnip.js","sourcesContent":["var editor = ace.edit(\"editor\");\neditor.setTheme(\"ace/theme/monokai\");\n\nvar commentButton = $( \"#btn-comment\" );\nvar modificationButton = $( \"#btn-modification\" );\n\nvar commentPanel = $( \"#panel-comment\" );\nvar modificationPanel = $( \"#panel-modification\" );\n\nvar commentSubmitButton = $( \"#btn-comment-submit\" );\nvar modificationSubmitButton = $( \"#btn-modification-submit\" );\n\nfunction changeScore(data, status, voteElement){\n    var scoreText = voteElement.find(\".score\");\n    console.log(data);\n    scoreText.text(data);\n}\n\nfunction displayVote(voteElement, voteType, replyId){\n    var notType;\n    switch (voteType){\n        case (\"+\"):\n            voteType = \"up\";\n            notType = \"down\";\n            break;\n        case (\"-\"):\n            voteType = \"down\";\n            notType = \"up\";\n            break;\n    }\n\n    var voteButton = voteElement.find(\"[data-type='\" + voteType + \"']\").find('i');\n    var otherVoteButton = voteElement.find(\"[data-type='\" + notType + \"']\").find('i');\n\n    if (voteType == \"up\"){\n        voteButton.addClass('text-success');\n        otherVoteButton.removeClass('text-danger');\n    }else{\n        voteButton.addClass('text-danger');\n        otherVoteButton.removeClass('text-success');\n    }\n\n    var url = '/vote/' + replyId + '/score';\n\n    $.ajax({\n        method: \"GET\",\n        url: url,\n        success: function(data, status){\n            changeScore(data, status, voteElement)\n        }\n    });\n\n}\n\nfunction submitReply(data){\n    $.ajax({\n        url: \"/s/\" + data[\"slug\"] + \"/reply\",\n        type: 'POST',\n        contentType: \"application/x-www-form-urlencoded\",\n        data: data,\n        headers: {\n            'X-CSRF-Token': data[\"_token\"]\n        },\n        success: function(data, textStatus ){\n            location.reload();\n\n        },\n        error: function(data, textStatus, errorThrown){\n            if (data.status == 422) {\n                showErrors(data.responseText);\n            }else{\n                var errorText;\n\n                switch (data.status){\n                    case 401:\n                        errorText = \"Unauthorised! Your login session may have expired\";\n                        break;\n                    default:\n                        errorText = \"An unknown error occured. Please try again later.\";\n                        break;\n\n                }\n                showErrors(JSON.stringify([errorText]));\n            }\n            editor.setReadOnly(false);\n            restoreButton(createButton, prevText);\n        }\n    });\n}\n\ncommentButton.click(function(){\n    modificationPanel.hide();\n    commentPanel.fadeIn()\n    getField(\"message\").focus();\n});\n\nmodificationButton.click(function(){\n    commentPanel.hide();\n    modificationPanel.fadeIn();\n    editor.focus();\n});\n\ncommentSubmitButton.click(function(){\n    console.log(\"comment submit\");\n    var submission = {};\n    submission[\"_token\"] = $('input[name=_token]').val();\n    submission[\"message\"] = getField(\"message\").val();\n    submission[\"modification\"] = false;\n    submission[\"slug\"] = getField(\"slug\").val();\n\n    submitReply(submission);\n});\n\nmodificationSubmitButton.click(function(){\n    var submission = {};\n    console.log(\"modification submit\");\n    submission[\"_token\"] = $('input[name=_token]').val();\n    submission[\"code\"] = editor.getValue();\n    submission[\"message\"] = getField(\"modification-message\").val();\n    submission[\"modification\"] = true;\n    submission[\"slug\"] = getField(\"slug\").val();\n\n    submitReply(submission);\n});\n\n\n$( \".vote\" ).click(function(){\n    var voteButton = $(this);\n    var replyId = voteButton.data('id');\n    var voteType = voteButton.data('type');\n    var url = \"/vote/\" + replyId + \"/\" + voteType;\n\n    $.ajax({\n        method: \"GET\",\n        url: url,\n        success: function(data){\n            displayVote(voteButton.parent(), data.type, replyId);\n        }\n    });\n\n\n});"],"sourceRoot":"/source/"}