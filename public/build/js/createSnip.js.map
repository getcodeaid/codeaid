{"version":3,"sources":["createSnip.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"createSnip.js","sourcesContent":["var editor = ace.edit(\"editor\");\neditor.setTheme(\"ace/theme/monokai\");\n\nvar snipCreateButton = $( \"#snipcreatebutton\" );\n\nfunction getField(name)\n{\n    return $( \"#field-\" + name );\n}\n\nfunction showErrors(errors)\n{\n    var errorText;\n    var errorLocation = $( \"#errors\" );\n\n    $(errorLocation).html('');\n\n    errors = JSON.parse(errors);\n\n    console.log(errors);\n\n    $.each(errors, function(location, error){\n       errorText = \"<li>\" + error + \"</li>\";\n        errorLocation.append(errorText);\n    });\n\n    $('html, body').animate({ scrollTop: 0 }, 'slow');\n    errorLocation.fadeIn();\n\n}\n\n\n$( getField('language') ).change(function() {\n    var langSelect = $( getField('language') ).find('option:selected');\n    var aceName = langSelect.data('ace-name');\n    var languageId = langSelect.attr('value');\n    editor.getSession().setMode(\"ace/mode/\" + aceName);\n\n});\n\n$(snipCreateButton).on('click', function(){\n    var originalText = $(this).html();\n    editor.setReadOnly(true);\n    $(this).prop('disabled', true);\n    $(this).html('<i class=\"fa fa-refresh fa-spin\"></i> Creating Snip...');\n\n    var submission = {};\n    var tokenField = $('input[name=_token]');\n    submission['title'] = getField('title').val();\n    submission['message'] = getField('message').val();\n    submission['code'] = editor.getValue();\n    submission['category_id'] = getField('category').val();\n    submission['language_id'] = getField('language').val();\n    submission['_token'] =  tokenField.val();\n\n    console.log(typeof submission);\n\n    $.ajax({\n        url: '/s',\n        type: 'POST',\n        contentType: \"application/x-www-form-urlencoded\",\n        data: submission,\n        headers: {\n            'X-CSRF-Token': tokenField.val()\n        },\n        success: function(data, textStatus ){\n            window.location.replace(\"/s/\" + data.slug);\n\n        },\n        error: function(data, textStatus, errorThrown){\n            if (data.status == 422) {\n                showErrors(data.responseText);\n            }else{\n                showErrors(['An unknown error occurred, please try again later']);\n            }\n            editor.setReadOnly(false);\n            $(snipCreateButton).prop('disabled', false);\n            $(snipCreateButton).html(originalText);\n        }\n    });\n});"],"sourceRoot":"/source/"}